from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
from matplotlib.ticker import LinearLocator, FormatStrFormatter
import matplotlib.pyplot as plt
import numpy as np
import scipy.interpolate as interp


import serial
import sys
import time
import io
import math

# imported calibration code
calibration = {10: 509, 20: 496, 30: 385, 40: 288, 50: 230, 60: 186, 70: 158, 80: 134, 90: 122, 100: 106, 110: 95, 120: 83, 130: 73, 140: 65, 160: 64}
keys, values = zip(*calibration.items())

a, b, c, d = np.polyfit(values, keys, 3)

def sensor_val_to_distance(val):
    return (val**3)*a + (val**2)*b + val*c + d

test_distances = ["0;30;5/138;31;5/134;32;5/134;33;5/134;34;5/134;35;5/135;36;5/135;37;5/131;38;5/138;39;5/134;26;5/134;27;5/135;28;5/142;29;5/140;30;5/138;31;5/134;32;5/134;33;5/134;34;5/134;35;5/135;36;5/135;37;5/131;38;5/138;39;5/323;5;5/316;6;5/327;7;5/338;8;5/345;9;5/335;10;5/325;11;5/318;12;5/310;13;5/304;14;5/287;15;5/240;16;5/206;17;5/170;18;5/157;19;5/154;20;5/140;21;5/127;22;5/131;23;5/134;24;5/134;25;5/135;26;5/135;27;5/137;28;5/140;29;5/134;30;5/138;31;5/134;32;5/133;33;5/135;34;5/134;35;5/134;36;5/134;37;5/135;38;5/138;39;5/135;40;5/136;41;5/130;42;5/127;43;5/127;44;5/130;45;5/130;46;5/126;47;5/127;48;5/128;49;5/127;50;5/319;5;6/330;6;6/328;7;6/337;8;6/338;9;6/334;10;6/327;11;6/316;12;6/317;13;6/316;14;6/307;15;6/287;16;6/237;17;6/183;18;6/162;19;6/151;20;6/138;21;6/127;22;6/131;23;6/137;24;6/141;25;6/143;26;6/135;27;6/137;28;6/132;29;6/134;30;6/134;31;6/135;32;6/135;33;6/135;34;6/137;35;6/141;36;6/139;37;6/134;38;6/134;39;6/130;40;6/131;41;6/131;42;6/131;43;6/131;44;6/132;45;6/135;46;6/133;47;6/131;48;6/129;49;6/127;50;6/316;5;7/319;6;7/326;7;7/339;8;7/343;9;7/343;10;7/333;11;7/327;12;7/320;13;7/322;14;7/346;15;7/353;16;7/339;17;7/240;18;7/170;19;7/152;20;7/135;21;7/131;22;7/134;23;7/138;24;7/135;25;7/134;26;7/134;27;7/135;28;7/135;29;7/135;30;7/136;31;7/141;32;7/135;33;7/139;34;7/136;35;7/133;36;7/135;37;7/134;38;7/134;39;7/135;40;7/131;41;7/133;42;7/138;43;7/137;44;7/131;45;7/128;46;7/125;47;7/127;48;7/127;49;7/127;50;7/412;5;8/320;6;8/328;7;8/347;8;8/353;9;8/338;10;8/325;11;8/320;12;8/320;13;8/335;14;8/358;15;8/365;16;8/359;17;8/272;18;8/178;19;8/154;20;8/137;21;8/126;22;8/131;23;8/134;24;8/135;25;8/135;26;8/136;27;8/136;28;8/142;29;8/139;30;8/138;31;8/135;32;8/133;33;8/133;34;8/135;35;8/135;36;8/135;37;8/135;38;8/135;39;8/138;40;8/139;41;8/134;42;8/134;43;8/131;44;8/131;45;8/130;46;8/131;47;8/131;48;8/128;49;8/127;50;8/320;5;9/328;6;9/336;7;9/339;8;9/334;9;9/327;10;9/323;11;9/316;12;9/323;13;9/331;14;9/332;15;9/324;16;9/328;17;9/297;18;9/176;19;9/155;20;9/135;21;9/127;22;9/131;23;9/135;24;9/135;25;9/136;26;9/138;27;9/135;28;9/144;29;9/137;30;9/136;31;9/136;32;9/135;33;9/135;34;9/135;35;9/135;36;9/135;37;9/138;38;9/140;39;9/135;40;9/138;41;9/135;42;9/131;43;9/132;44;9/131;45;9/131;46;9/130;47;9/132;48;9/129;49;9/133;50;9/328;5;10/326;6;10/338;7;10/340;8;10/335;9;10/327;10;10/323;11;10/319;12;10/323;13;10/331;14;10/327;15;10/323;16;10/323;17;10/308;18;10/194;19;10/159;20;10/134;21;10/135;22;10/139;23;10/139;24;10/135;25;10/139;26;10/139;27;10/145;28;10/135;29;10/140;30;10/135;31;10/134;32;10/135;33;10/135;34;10/135;35;10/134;36;10/134;37;10/135;38;10/135;39;10/135;40;10/134;41;10/135;42;10/131;43;10/132;44;10/132;45;10/139;46;10/137;47;10/135;48;10/133;49;10/132;50;10/334;5;11/326;6;11/337;7;11/337;8;11/334;9;11/330;10;11/324;11;11/319;12;11/327;13;11/327;14;11/324;15;11/319;16;11/323;17;11/324;18;11/285;19;11/169;20;11/146;21;11/138;22;11/139;23;11/143;24;11/143;25;11/142;26;11/140;27;11/140;28;11/140;29;11/134;30;11/139;31;11/138;32;11/134;33;11/134;34;11/135;35;11/135;36;11/135;37;11/135;38;11/135;39;11/135;40;11/135;41;11/136;42;11/132;43;11/134;44;11/138;45;11/138;46;11/131;47;11/134;48;11/134;49;11/130;50;11/330;5;12/325;6;12/339;7;12/339;8;12/335;9;12/330;10;12/323;11;12/320;12;12/323;13;12/323;14;12/320;15;12/320;16;12/325;17;12/338;18;12/349;19;12/274;20;12/193;21;12/183;22;12/182;23;12/171;24;12/165;25;12/160;26;12/157;27;12/151;28;12/147;29;12/148;30;12/146;31;12/148;32;12/147;33;12/142;34;12/143;35;12/143;36;12/138;37;12/139;38;12/139;39;12/135;40;12/136;41;12/135;42;12/136;43;12/135;44;12/138;45;12/136;46;12/135;47;12/131;48;12/134;49;12/131;50;12/320;5;13/329;6;13/337;7;13/337;8;13/339;9;13/331;10;13/323;11;13/319;12;13/320;13;13/320;14;13/320;15;13/320;16;13/325;17;13/333;18;13/350;19;13/354;20;13/328;21;13/323;22;13/323;23;13/311;24;13/292;25;13/278;26;13/273;27;13/267;28;13/249;29;13/240;30;13/226;31;13/211;32;13/194;33;13/182;34;13/174;35;13/166;36;13/162;37;13/155;38;13/151;39;13/146;40;13/143;41;13/139;42;13/135;43;13/135;44;13/131;45;13/134;46;13/139;47;13/138;48;13/131;49;13/130;50;13/332;5;14/334;6;14/341;7;14/346;8;14/337;9;14/331;10;14/324;11;14/319;12;14/316;13;14/315;14;14/317;15;14/320;16;14/324;17;14/330;18;14/339;19;14/343;20;14/343;21;14/343;22;14/350;23;14/351;24;14/347;25;14/339;26;14/334;27;14/327;28;14/322;29;14/314;30;14/306;31;14/291;32;14/267;33;14/252;34;14/233;35;14/218;36;14/198;37;14/190;38;14/178;39;14/162;40;14/154;41;14/146;42;14/140;43;14/136;44;14/135;45;14/131;46;14/132;47;14/132;48;14/132;49;14/130;50;14/328;5;15/329;6;15/346;7;15/343;8;15/347;9;15/333;10;15/322;11;15/320;12;15/311;13;15/307;14;15/311;15;15/320;16;15/323;17;15/327;18;15/330;19;15/335;20;15/335;21;15/338;22;15/338;23;15/343;24;15/343;25;15/347;26;15/348;27;15/350;28;15/362;29;15/ \
365;30;15/365;31;15/362;32;15/369;33;15/367;34;15/371;35;15/362;36;15/361;37;15/353;38;15/346;39;15/332;40;15/304;41;15/262;42;15/178;43;15/151;44;15/144;45;15/135;46;15/132;47;15/132;48;15/132;49;15/127;50;15/324;5;16/324;6;16/337;7;16/347;8;16/339;9;16/341;10;16/335;11;16/325;12;16/312;13;16/302;14;16/303;15;16/309;16;16/324;17;16/327;18;16/331;19;16/331;20;16/335;21;16/335;22;16/338;23;16/338;24;16/339;25;16/339;26;16/338;27;16/342;28;16/343;29;16/344;30;16/343;31;16/348;32;16/347;33;16/355;34;16/353;35;16/357;36;16/351;37;16/361;38;16/360;39;16/364;40;16/358;41;16/355;42;16/307;43;16/239;44;16/163;45;16/139;46;16/136;47;16/131;48;16/132;49;16/132;50;16/332;5;17/324;6;17/335;7;17/343;8;17/339;9;17/335;10;17/329;11;17/320;12;17/312;13;17/293;14;17/289;15;17/300;16;17/320;17;17/327;18;17/328;19;17/332;20;17/332;21;17/336;22;17/338;23;17/339;24;17/347;25;17/338;26;17/346;27;17/345;28;17/350;29;17/342;30;17/349;31;17/348;32;17/347;33;17/342;34;17/341;35;17/341;36;17/342;37;17/342;38;17/342;39;17/342;40;17/346;41;17/350;42;17/351;43;17/327;44;17/273;45;17/155;46;17/140;47;17/138;48;17/132;49;17/129;50;17/328;5;18/324;6;18/341;7;18/350;8;18/345;9;18/341;10;18/333;11;18/326;12;18/320;13;18/294;14;18/267;15;18/281;16;18/299;17;18/323;18;18/327;19;18/328;20;18/331;21;18/331;22;18/332;23;18/336;24;18/335;25;18/335;26;18/335;27;18/339;28;18/340;29;18/339;30;18/339;31;18/339;32;18/345;33;18/346;34;18/351;35;18/343;36;18/351;37;18/349;38;18/349;39;18/343;40;18/352;41;18/348;42;18/352;43;18/347;44;18/325;45;18/212;46;18/146;47;18/144;48;18/136;49;18/132;50;18/324;5;19/324;6;19/339;7;19/342;8;19/340;9;19/332;10;19/328;11;19/324;12;19/317;13;19/291;14;19/261;15;19/262;16;19/293;17;19/327;18;19/330;19;19/330;20;19/325;21;19/334;22;19/337;23;19/336;24;19/335;25;19/339;26;19/333;27;19/337;28;19/339;29;19/338;30;19/339;31;19/339;32;19/343;33;19/343;34;19/338;35;19/338;36;19/344;37;19/339;38;19/339;39;19/339;40;19/343;41;19/340;42;19/345;43;19/346;44;19/339;45;19/300;46;19/187;47;19/154;48;19/139;49;19/135;50;19/339;5;20/328;6;20/344;7;20/345;8;20/337;9;20/336;10;20/323;11;20/320;12;20/316;13;20/304;14;20/292;15;20/327;16;20/351;17;20/328;18;20/304;19;20/274;20;20/237;21;20/222;22;20/238;23;20/257;24;20/264;25;20/274;26;20/288;27;20/297;28;20/303;29;20/309;30;20/326;31;20/338;32;20/345;33;20/335;34;20/337;35;20/335;36;20/330;37;20/328;38;20/332;39;20/335;40;20/334;41;20/335;42;20/338;43;20/338;44;20/339;45;20/332;46;20/301;47;20/262;48;20/167;49;20/131;50;20/327;5;21/324;6;21/339;7;21/342;8;21/346;9;21/341;10;21/327;11;21/326;12;21/325;13;21/316;14;21/323;15;21/345;16;21/345;17;21/322;18;21/293;19;21/254;20;21/197;21;21/170;22;21/182;23;21/199;24;21/209;25;21/225;26;21/238;27;21/249;28;21/221;29;21/258;30;21/292;31;21/340;32;21/336;33;21/325;34;21/287;35;21/282;36;21/285;37;21/296;38;21/303;39;21/312;40;21/323;41;21/329;42;21/342;43;21/340;44;21/339;45;21/339;46;21/327;47;21/302;48;21/196;49;21/135;50;21/322;5;22/324;6;22/338;7;22/339;8;22/339;9;22/335;10;22/327;11;22/323;12;22/320;13;22/328;14;22/347;15;22/352;16;22/332;17;22/307;18;22/247;19;22/162;20;22/144;21;22/143;22;22/138;23;22/146;24;22/140;25;22/140;26;22/141;27;22/137;28;22/171;29;22/295;30;22/350;31;22/349;32;22/336;33;22/316;34;22/280;35;22/221;36;22/226;37;22/242;38;22/262;39;22/274;40;22/289;41;22/308;42;22/329;43;22/337;44;22/336;45;22/344;46;22/334;47;22/315;48;22/255;49;22/138;50;22/335;5;23/324;6;23/344;7;23/343;8;23/340;9;23/335;10;23/326;11;23/323;12;23/327;13;23/343;14;23/346;15;23/331;16;23/319;17;23/293;18;23/233;19;23/146;20;23/139;21;23/136;22;23/137;23;23/138;24;23/138;25;23/136;26;23/139;27;23/140;28;23/167;29;23/258;30;23/342;31;23/352;32;23/335;33;23/309;34;23/260;35;23/154;36;23/147;37;23/163;38;23/186;39;23/217;40;23/245;41;23/281;42;23/316;43;23/327;44;23/335;45;23/335;46;23/328;47;23/316;48;23/241;49;23/140;50;23/327;5;24/325;6;24/339;7;24/350;8;24/345;9;24/340;10;24/328;11;24/326;12;24/329;13;24/341;14;24/338;15;24/331;16;24/316;17;24/288;18;24/218;19;24/143;20;24/135;21;24/132;22;24/135;23;24/136;24;24/135;25;24/135;26;24/135;27;24/140;28;24/184;29;24/293;30;24/343;31;24/351;32;24/334;33;24/291;34;24/191;35;24/140;36;24/138;37;24/158;38;24/136;39;24/141;40;24/160;41;24/215;42;24/278;43;24/312;44;24/328;45;24/335;46;24/331;47;24/324;48;24/268;49;24/143;50;24/324;5;25/323;6;25/339;7;25/343;8;25/341;9;25/339;10;25/336;11;25/331;12;25/339;13;25/341;14;25/337;15;25/330;16;25/326;17;25/293;18;25/161;19;25/141;20;25/127;21;25/128;22;25/135;23;25/135;24;25/135;25;25/135;26;25/134;27;25/140;28;25/210;29;25/323;30;25/342;31;25/342;32;25/320;33;25/249;34;25/140;35;25/133;36;25/134;37;25/134;38;25/138;39;25/138;40;25/136;41;25/143;42;25/194;43;25/295;44;25/326;45;25/336;46;25/335;47;25/326;48;25/276;49;25/148;50;25/331;5;26/328;6;26/339;7;26/342;8;26/338;9;26/336;10;26/327;11;26/323;12;26/331;13;26/331;14;26/325;15;26/325;16;26/322;17;26/300;18;26/198;19;26/148;20;26/133;21;26/128;22;26/135;23;26/139;24;26/140;25;26/135;26;26/136;27;26/159;28;26/278;29;26/344;30;26/345;31;26/330;32;26/292;33;26/183;34;26/134;35;26/131;36;26/130;37;26/131;38;26/131;39;26/131;40;26/130;41;26/132;42;26/140;43;26/263;44;26/320;45;26/332;46;26/336;47;26/332;48;26/307;49;26/143;50;26/332;5;27/333;6;27/339;7;27/346;8;27/337;9;27/335;10;27/327;11;27/324;12;27/323;13;27/323;14;27/320;15;27/323;16;27/323;17;27/312;18;27/249;19;27/147;20;27/127;21;27/127;22;27/131;23;27/137;24;27/136;25;27/141;26;27/163;27;27/265;28;27/350;29;27/351;30;27/335;31;27/318;32;27/238;33;27/142;34;27/131;35;27/128;36;27/129;37;27/130;38;27/132;39;27/131;40;27/131;41;27/131;42;27/136;43;27/198;44;27/300;45;27/330;46;27/332;47;27/324;48;27/284;49;27/147;50;27/328;5;28/324;6;28/336;7;28/342;8;28/346;9;28/341;10;28/333;11;28/324;12;28/328;13;28/324;14;28/322;15;28/320;16;28/323;17;28/316;18;28/233;19;28/150;20;28/132;21;28/127;22;28/135;23;28/135;24;28/139;25;28/147;26;28/198;27;28/288;28;28/347;29;28/340;30;28/328;31;28/307;32;28/204;33;28/141;34;28/137;35;28/131;36;28/140;37;28/138;38;28/139;39;28/134;40;28/132;41;28/132;42;28/135;43;28/202;44;28/300;45;28/334;46;28/331;47;28/323;48;28/284;49;28/151;50;28/327;5;29/324;6;29/334;7;29/339;8;29/339;9;29/339;10;29/332;11;29/331;12;29/327;13;29/327;14;29/325;15;29/326;16;29/331;17;29/336;18;29/291;19;29/196;20;29/141;21;29/139;22;29/143;23;29/147;24;29/150;25;29/199;26;29/281;27;29/342;28;29/346;29;29/335;30;29/327;31;29/292;32;29/166;33;29/132;34;29/132;35;29/137;36;29/140;37;29/143;38;29/149;39;29/143;40;29/144;41;29/136;42;29/146;43;29/203;44;29/308;45;29/335;46;29/329;47;29/318;48;29/283;49;29/148;50;29/322;5;30/323;6;30/335;7;30/339;8;30/339;9;30/331;10;30/328;11;30/321;12;30/321;13;30/317;14;30/317;15;30/328;16;30/331;17;30/340;18;30/342;19;30/294;20;30/230;21;30/200;22;30/199;23;30/205;24;30/228;25;30/291;26;30/340;27;30/349;28;30/342;29;30/330;30;30/312;31;30/277;32;30/142;33;30/130;34;30/135;35;30/150;36;30/171;37;30/191;38;30/179;39;30/167;40;30/156;41;30/152;42;30/155;43;30/228;44;30/319;45;30/342;46;30/328;47;30/326;48;30/283;49;30/147;50;30/330;5;31/333;6;31/339;7;31/338;8;31/334;9;31/331;10;31/323;11;31/321;12;31/311;13;31/311;14;31/316;15;31/316;16;31/320;17;31/327;18;31/339;19;31/331;20;31/306;21;31/304;22;31/312;23;31/312;24;31/330;25;31/354;26;31/365;27;31/347;28;31/346;29;31/332;30;31/304;31;31/270;32;31/135;33;31/132;34;31/152;35;31/203;36;31/262;37;31/296;38;31/288;39;31/263;40;31/241;41;31/209;42;31/197;43;31/270;44;31/332;45;31/334;46;31/325;47;31/316;48;31/263;49;31/141;50;31/327;5;32/322;6;32/340;7;32/346;8;32/339;9;32/338;10;32/330;11;32/324;12;32/307;13;32/302;14;32/306;15;32/310;16;32/320;17;32/323;18;32/327;19;32/330;20;32/334;21;32/342;22;32/346;23;32/346;24;32/350;25;32/347;26;32/343;27;32/339;28;32/332;29;32/315;30;32/286;31;32/193;32;32/137;33;32/144;34;32/210;35;32/298;36;32/340;37;32/364;38;32/362;39;32/361;40;32/360;41;32/350;42;32/334;43;32/338;44;32/346;45;32/331;46;32/320;47;32/300;48;32/237;49;32/128;50;32/323;5;33/315;6;33/332;7;33/335;8;33/338;9;33/339;10;33/324;11;33/322;12;33/309;13;33/294;14;33/292;15;33/315;16;33/324;17;33/325;18;33/324;19;33/325;20;33/326;21;33/329;22;33/331;23;33/335;24;33/334;25;33/335;26;33/336;27;33/331;28;33/319;29;33/280;30;33/226;31;33/143;32;33/131;33;33/138;34;33/195;35;33/318;36;33/342;37;33/346;38;33/340;39;33/346;40;33/349;41;33/351;42;33/347;43;33/352;44;33/352;45;33/329;46;33/304;47;33/274;48;33/166;49;33/124;50;33/321;5;34/315;6;34/330;7;34/334;8;34/335;9;34/331;10;34/322;11;34/315;12;34/304;13;34/286;14;34/278;15;34/291;16;34/318;17;34/326;18;34/329;19;34/323;20;34/333;21;34/333;22;34/339;23;34/331;24;34/334;25;34/329;26;34/324;27;34/316;28;34/276;29;34/197;30;34/130;31;34/130;32;34/126;33;34/145;34;34/261;35;34/320;36;34/337;37;34/338;38;34/338;39;34/338;40;34/339;41;34/340;42;34/338;43;34/334;44;34/333;45;34/309;46;34/273;47;34/209;48;34/137;49;34/125;50;34/316;5;35/325;6;35/336;7;35/340;8;35/334;9;35/330;10;35/322;11;35/315;12;35/307;13;35/276;14;35/264;15;35/280;16;35/303;17;35/316;18;35/319;19;35/323;20;35/323;21;35/331;22;35/334;23;35/334;24;35/330;25;35/333;26;35/328;27;35/308;28;35/253;29;35/164;30;35/127;31;35/123;32;35/126;33;35/142;34;35/244;35;35/315;36;35/337;37;35/338;38;35/337;39;35/337;40;35/337;41;35/334;42;35/334;43;35/334;44;35/322;45;35/296;46;35/259;47;35/179;48;35/126;49;35/127;50;35/322;5;36/323;6;36/333;7;36/339;8;36/337;9;36/324;10;36/319;11;36/310;12;36/302;13;36/279;14;36/225;15;36/228;16;36/257;17;36/283;18;36/300;19;36/310;20;36/319;21;36/319;22;36/324;23;36/323;24;36/323;25;36/320;26;36/308;27;36/288;28;36/212;29;36/136;30;36/130;31;36/129;32;36/130;33;36/142;34;36/217;35;36/306;36;36/325;37;36/332;38;36/335;39;36/334;40;36/334;41;36/330;42;36/331;43;36/315;44;36/306;45;36/253;46;36/162;47;36/130;48;36/122;49;36/123;50;36/310;5;37/316;6;37/327;7;37/335;8;37/341;9;37/333;10;37/328;11;37/308;12;37/297;13;37/293;14;37/222;15;37/198;16;37/228;17;37/264;18;37/283;19;37/300;20;37/306;21;37/310;22;37/314;23;37/316;24;37/310;25;37/303;26;37/284;27;37/244;28;37/147;29;37/126;30;37/127;31;37/127;32;37/133;33;37/138;34;37/198;35;37/288;36;37/325;37;37/337;38;37/337;39;37/330;40;37/333;41;37/324;42;37/322;43;37/316;44;37/287;45;37/232;46;37/157;47;37/127;48;37/122;49;37/122;50;37/311;5;38/320;6;38/326;7;38/330;8;38/330;9;38/334;10;38/318;11;38/291;12;38/272;13;38/262;14;38/212;15;38/189;16;38/158;17;38/196;18;38/230;19;38/259;20;38/269;21;38/272;22;38/276;23;38/276;24;38/273;25;38/264;26;38/239;27;38/180;28;38/127;29;38/126;30;38/126;31;38/126;32;38/127;33;38/127;34;38/151;35;38/237;36;38/295;37;38/315;38;38/323;39;38/326;40;38/320;41;38/322;42;38/305;43;38/286;44;38/240;45;38/152;46;38/127;47;38/120;48;38/123;49;38/122;50;38/313;5;39/310;6;39/322;7;39/330;8;39/330;9;39/326;10;39/311;11;39/281;12;39/255;13;39/232;14;39/220;15;39/187;16;39/154;17;39/129;18;39/129;19;39/143;20;39/144;21;39/142;22;39/139;23;39/136;24;39/134;25;39/134;26;39/127;27;39/127;28;39/126;29;39/126;30;39/127;31;39/126;32;39/126;33;39/126;34;39/127;35;39/131;36;39/151;37;39/200;38;39/240;39;39/246;40;39/251;41;39/256;42;39/238;43;39/191;44;39/130;45;39/126;46;39/119;47;39/116;48;39/120;49;39/119;50;39/306;5;40/307;6;40/315;7;40/328;8;40/327;9;40/324;10;40/312;11;40/293;12;40/264;13;40/241;14;40/217;15;40/199;16;40/174;17;40/142;18;40/134;19;40/131;20;40/128;21;40/129;22;40/124;23;40/128;24;40/127;25;40/127;26;40/123;27;40/128;28;40/127;29;40/127;30;40/127;31;40/128;32;40/128;33;40/127;34;40/127;35;40/128;36;40/130;37;40/134;38;40/138;39;40/132;40;40/141;41;40/135;42;40/131;43;40/120;44;40/120;45;40/115;46;40/116;47;40/120;48;40/119;49;40/119;50;40/304;5;41/303;6;41/315;7;41/323;8;41/324;9;41/323;10;41/312;11;41/288;12;41/258;13;41/241;14;41/220;15;41/204;16;41/174;17;41/149;18;41/137;19;41/134;20;41/124;21;41/121;22;41/124;23;41/121;24;41/124;25;41/127;26;41/127;27;41/128;28;41/128;29;41/128;30;41/127;31;41/127;32;41/127;33;41/127;34;41/127;35;41/127;36;41/127;37;41/128;38;41/130;39;41/130;40;41/123;41;41/126;42;41/122;43;41/122;44;41/119;45;41/120;46;41/119;47;41/115;48;41/120;49;41/119;50;41/302;5;42/300;6;42/311;7;42/319;8;42/323;9;42/319;10;42/312;11;42/296;12;42/260;13;42/233;14;42/221;15;42/208;16;42/183;17;42/150;18;42/138;19;42/131;20;42/122;21;42/119;22;42/119;23;42/120;24;42/123;25;42/124;26;42/128;27;42/123;28;42/127;29;42/124;30;42/128;31;42/123;32;42/127;33;42/128;34;42/124;35;42/123;36;42/124;37;42/123;38;42/126;39;42/130;40;42/130;41;42/119;42;42/125;43;42/125;44;42/126;45;42/119;46;42/123;47;42/122;48;42/121;49;42/120;50;42/307;5;43/300;6;43/310;7;43/319;8;43/320;9;43/319;10;43/312;11;43/297;12;43/263;13;43/241;14;43/213;15;43/198;16;43/175;17;43/151;18;43/136;19;43/130;20;43/122;21;43/123;22;43/130;23;43/128;24;43/126;25;43/126;26;43/126;27;43/126;28;43/124;29;43/124;30;43/119;31;43/128;32;43/123;33;43/123;34;43/123;35;43/128;36;43/119;37;43/124;38;43/123;39;43/123;40;43/123;41;43/119;42;43/119;43;43/119;44;43/120;45;43/120;46;43/126;47;43/119;48;43/123;49;43/123;50;43/298;5;44/301;6;44/309;7;44/321;8;44/320;9;44/319;10;44/311;11;44/291;12;44/262;13;44/236;14;44/213;15;44/201;16;44/175;17;44/150;18;44/135;19;44/128;20;44/120;21;44/116;22;44/122;23;44/130;24;44/123;25;44/130;26;44/126;27;44/126;28;44/124;29;44/125;30;44/125;31;44/124;32;44/123;33;44/123;34;44/123;35;44/123;36;44/123;37;44/123;38;44/123;39;44/123;40;44/124;41;44/122;42;44/119;43;44/123;44;44/120;45;44/120;46;44/121;47;44/122;48;44/120;49;44/124;50;44/303;5;45/297;6;45/309;7;45/316;8;45/319;9;45/316;10;45/307;11;45/296;12;45/264;13;45/241;14;45/243;15;45/193;16;45/173;17;45/209;18;45/134;19;45/127;20;45/111;21;45/112;22;45/117;23;45/120;24;45/122;25;45/120;26;45/124;27;45/122;28;45/126;29;45/123;30;45/128;31;45/125;32;45/124;33;45/119;34;45/117;35;45/122;36;45/122;37;45/118;38;45/118;39;45/118;40;45/118;41;45/119;42;45/118;43;45/119;44;45/119;45;45/118;46;45/115;47;45/116;48;45/115;49;45/115;50;45/293;5;46/299;6;46/295;7;46/313;8;46/315;9;46/316;10;46/306;11;46/296;12;46/265;13;46/244;14;46/221;15;46/201;16;46/173;17;46/146;18;46/134;19;46/123;20;46/115;21;46/106;22;46/115;23;46/116;24;46/120;25;46/120;26;46/122;27;46/124;28;46/122;29;46/121;30;46/121;31;46/126;32;46/122;33;46/120;34;46/119;35;46/117;36;46/119;37;46/118;38;46/118;39;46/118;40;46/118;41;46/118;42;46/119;43;46/119;44;46/118;45;46/118;46;46/115;47;46/116;48;46/117;49;46/118;50;46/304;5;47/299;6;47/301;7;47/313;8;47/307;9;47/309;10;47/301;11;47/290;12;47/269;13;47/240;14;47/217;15;47/201;16;47/166;17;47/146;18;47/130;19;47/122;20;47/111;21;47/106;22;47/115;23;47/116;24;47/115;25;47/123;26;47/122;27;47/125;28;47/118;29;47/125;30;47/120;31;47/119;32;47/119;33;47/116;34;47/119;35;47/119;36;47/119;37;47/118;38;47/119;39;47/118;40;47/118;41;47/118;42;47/115;43;47/115;44;47/115;45;47/116;46;47/117;47;47/122;48;47/115;49;47/118;50;47/295;5;48/288;6;48/316;7;48/306;8;48/305;9;48/307;10;48/303;11;48/291;12;48/268;13;48/244;14;48/217;15;48/197;16;48/168;17;48/150;18;48/131;19;48/118;20;48/107;21;48/102;22;48/116;23;48/120;24;48/117;25;48/114;26;48/117;27;48/120;28;48/120;29;48/119;30;48/117;31;48/118;32;48/118;33;48/119;34;48/118;35;48/118;36;48/118;37;48/119;38;48/119;39;48/118;40;48/118;41;48/119;42;48/116;43;48/122;44;48/122;45;48/115;46;48/118;47;48/118;48;48/118;49;48/115;50;48/289;5;49/288;6;49/288;7;49/296;8;49/303;9;49/303;10;49/303;11;49/291;12;49/269;13;49/240;14;49/221;15;49/202;16;49/179;17;49/148;18;49/130;19;49/128;20;49/114;21;49/106;22;49/110;23;49/118;24;49/118;25;49/118;26;49/114;27;49/111;28;49/112;29;49/114;30;49/118;31;49/118;32;49/118;33;49/114;34;49/119;35;49/119;36;49/118;37;49/115;38;49/119;39;49/116;40;49/115;41;49/117;42;49/123;43;49/119;44;49/116;45;49/119;46;49/119;47;49/113;48;49/112;49;49/107;50;49/335;5;50/282;6;50/287;7;50/295;8;50/299;9;50/303;10;50/299;11;50/290;12;50/273;13;50/241;14;50/218;15;50/200;16;50/173;17;50/155;18;50/134;19;50/125;20;50/111;21;50/103;22;50/112;23;50/110;24;50/115;25;50/113;26;50/114;27;50/114;28;50/115;29;50/114;30;50/114;31;50/114;32;50/115;33;50/115;34;50/116;35;50/116;36;50/115;37;50/119;38;50/118;39;50/119;40;50/116;41;50/116;42;50/113;43;50/111;44;50/115;45;50/110;46;50/110;47;50/110;48;50/112;49;50/111;50;50/"]


data = test_distances[0].split("/")
data.pop()


servo_lr_vals = []
servo_ud_vals = []
distances = []
for i, datum in enumerate(data):
    [sensorvalue, servo_up_down, servo_left_right] = datum.split(';')

    # converting to int and removing new lines
    sensorvalue = int(sensorvalue)
    servo_up_down= int(servo_up_down.rstrip())
    servo_left_right = int(servo_left_right.rstrip())

    updown_angle = math.radians(servo_up_down)
    leftright_angle = math.radians(servo_left_right)

    sensorvalue = sensorvalue * math.cos(updown_angle)

    distance = sensor_val_to_distance(sensorvalue)
    distances.append(distance)

    servo_lr_vals.append(servo_left_right)
    servo_ud_vals.append(servo_up_down)


servo_ud_vals = servo_ud_vals[24:]
servo_lr_vals = servo_lr_vals[24:]
distances = distances[24:]


X = servo_lr_vals
Y = servo_ud_vals
Z = distances

plotx,ploty, = np.meshgrid(np.linspace(np.min(X),np.max(X),45),\
                           np.linspace(np.min(Y),np.max(Y),45))
plotz = interp.griddata((X,Y),Z,(plotx,ploty),method='linear')

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot_surface(plotx,ploty,plotz,cstride=1,rstride=1,cmap=cm.coolwarm)
plt.show()


# X=np.unique(X)
# Y=np.unique(Y)
# x,y = np.meshgrid(X,Y)
# Z = np.array(Z)
# z=Z.reshape(len(Y),len(X))
# reversed_arr = y[::-1]

# plt.pcolormesh(reversed_arr,x,z)
# plt.show()







